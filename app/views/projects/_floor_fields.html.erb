<%= building_form.fields_for :floors  do |floor_form| %>
  <li class="card-panel fields pink lighten-3 white-text">
    <div class="row">
        <div class="col s12">
            <div class="row">
                <div class="col s6">
                  <%= floor_form.label(:name, "Name") %>
                  <%= floor_form.text_field :name, :placeholder => "Floor 1" %>
                </div>
                <div class="col s3">
                  <p>
                    <%= floor_form.check_box :status, :placeholder => "true" %>
                    <%= floor_form.label(:status, "Status") %>
                  </p>          
                </div>
                <div class="col s3">
                  <%= floor_form.label(:number_of_flats, "Number of Flats") %>
                  <%= floor_form.number_field :number_of_flats, :placeholder => "3" %>
                </div>
            </div>
        </div>
    </div>
    <% if floor_form.object && floor_form.object.id.present? %>
      <br/>
      <h6>Floor Stages</h6>
      <%= render :partial => 'floors/stage_fields', :locals => {:floor_form => floor_form }  %>

      <br/>
      <h6>Floor Ammenities</h6>
      <%= render :partial => 'projects/ammenity_fields', :locals => {:f => floor_form}  %>

      <h6>Floor Photos</h6>
      <div class="card-panel">
        <%= floor_form.label :photos_files %>
        <%= floor_form.attachment_field :photos_files, multiple: true, direct: true, presigned: true %>
        <% floor_form.object.photos.each do |photo|%>
          <%= attachment_image_tag(photo, :file, :fill, 350, 350) %>
        <% end %>
      </div>
    <% end %>


    <br/>
    <h6>Flat</h6>
    <ul>
      <%= render :partial => 'projects/flat_fields', :locals => { :floor_form => floor_form}  %>
      <%= link_to_add_flats "Add Flats", floor_form, :flats %>
    </ul>
    <%= link_to_remove_floors "-", floor_form %>
  </li>
  <br/>
<% end %>