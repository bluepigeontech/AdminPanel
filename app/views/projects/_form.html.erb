<%= form_for(project) do |project_form| %>
   <% if project.errors.any? %>
      <div id="error_explanation">
        <div><%= pluralize(project.errors.count, "error") %> prohibited this project from being saved:</div>

        <ul>
        <% project.errors.full_messages.each do |message| %>
          <li><%= message %></li>
        <% end %>
        </ul>
      </div>
    <% end %>
    <div class="card-panel">
      <div class="content-wrapper">
        <div class="content-header">
          <h6 class="col mdi-content-add">Builder Details</h6>
        </div>
        <div class="content-block">
          <%= label_tag(:builder_id, "Builder") %>

          <%= project_form.select(:builder_id, options_for_select(@builders, :selected => project_form.object.builder_id), :prompt => 'Select Builder') %>

          <%= label_tag(:company_id, "Company") %>
          <%= project_form.select(:company_id, options_for_select(@builder_companies, :selected => project_form.object.company_id), :prompt => 'Select Builder Company') %>
        </div>
      </div>
    </div>
    <div class="card-panel">
      <div class="content-wrapper">
        <div class="content-header">
          <h6 class="col mdi-content-add">Project Details</h6>
        </div>
        <div class="content-block">
           <div class="row">
              <div class="col s12">
                  <div class="row">
                      <div class="col s9">
                        <%= label_tag(:name, "Name") %>
                        <%= project_form.text_field :name, :placeholder => "DLF" %>
                          
                      </div>
                      <div class="col s3">
                        <%= project_form.check_box :status, :placeholder => "true" %>
                        <%= project_form.label(:status, "Status") %>
                      </div>
                  </div>
              </div>
          </div>

          <%= label_tag(:seller_type, "Seller Type") %>
          <%= project_form.text_field :seller_type, :placeholder => "Builder, Sole Seller, Broker, Property Management Firm etc." %>

          <%= label_tag(:description, "Description") %>
          <%= project_form.text_field :description, :placeholder => "Description about the project..." %>

          <%= label_tag(:usp, "USP") %>
          <%= project_form.text_field :usp, :placeholder => "USP" %>

          <div class="row">
              <div class="col s12">
                  <div class="row">
                      <div class="col s3">
                        <%= project_form.label(:launch_date, "Launch Date") %>
                        <%= project_form.date_field :launch_date, :placeholder => "Launch Date" %>
                      </div>
                      <div class="col s3">
                        <%= project_form.label(:project_type, "Project Type") %>
                        <%= project_form.select(:project_type, options_for_select(get_types, :selected => project_form.object.project_type), :prompt => 'Select Project Type') %>
                      </div>
                      <div class="col s3">
                        <%= project_form.label(:property_type, "Property Type") %>
                        <%= project_form.select(:property_type, options_for_select(get_property_types, :selected => project_form.object.property_type), :prompt => 'Select Property Type') %>
                      </div>
                      <div class="col s3">
                        <%= project_form.label(:number_of_buildings, "Number of Buildings") %>
                        <%= project_form.number_field :number_of_buildings, :placeholder => "3" %>
                      </div>
                  </div>
              </div>
          </div>

          <%= render :partial => 'layouts/partials/location_form', :locals => {:f => project_form }  %>
          <%= label_tag(:address, "Address") %>
          <%= project_form.text_field :address, :placeholder => "Address..." %>

         

          <%= render :partial => 'layouts/partials/map_details_form', :locals => {:f => project_form }  %>
          <%= project_form.label(:approval_type, "Approval Type") %>
          <%= project_form.select(:approval_type, options_for_select(get_approval_types, :selected => project_form.object.approval_type), :prompt => 'Select Approval Type') %>
        </div>
      </div>

      
     
    </div>
    <% if project.id.present? %>
      <div class="content-wrapper card-panel">
        <div class="content-header">
          <h6 class="col mdi-content-add">Project Stages</h6>
        </div>
        <div class="content-block">
          <%= render :partial => 'projects/stage_fields', :locals => { :project => project, :project_form => project_form }  %>
        </div>
      </div>

      <div class="content-wrapper card-panel">
        <div class="content-header">
          <h6 class="col mdi-content-add">Project Ammenities</h6>
        </div>
        <div class="content-block">
          <%= render :partial => 'projects/ammenity_fields', :locals => { :f => project_form }  %>
        </div>
      </div>

      <div class="content-wrapper card-panel">
        <div class="content-header">
          <h6 class="col mdi-content-add">Project Photos</h6>
        </div>
        <div class="content-block ">
          <%= project_form.label :photos_files %>
          <%= project_form.attachment_field :photos_files, multiple: true, direct: true, presigned: true %>
          <% project.photos.each do |photo|%>
            <%= attachment_image_tag(photo, :file, :fill, 350, 350) %>
          <% end %>
        </div>
      </div>
    <% end %>


    <div class="content-wrapper card-panel">
      <div class="content-header">
        <h6 class="col mdi-content-add">Project Buildings</h6>
      </div>
      <div class="content-block">
        <%= render :partial => 'projects/building_fields', :locals => { :project => project, :project_form => project_form }  %>
        <%= link_to_add_buildings "Add Buildings", project, project_form, :buildings %>
      </div>
    </div>

    <div>
    </div>
    <% if access_projects_edit %>
      <button class="btn cyan waves-effect waves-light" type="submit" name="action">Submit</button>
    <% end %>
    
<% end %>